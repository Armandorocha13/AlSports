<!DOCTYPE html>
<html lang="pt-BR">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Simulador de Pedido WhatsApp</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			max-width: 800px;
			margin: 0 auto;
			padding: 20px;
			background-color: #1a1a1a;
			color: white;
		}

		.container {
			background-color: #2a2a2a;
			padding: 20px;
			border-radius: 10px;
			margin-bottom: 20px;
		}

		button {
			background-color: #4CAF50;
			color: white;
			padding: 10px 20px;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			margin: 5px;
		}

		button:hover {
			background-color: #45a049;
		}

		.order-info {
			background-color: #333;
			padding: 15px;
			border-radius: 5px;
			margin: 10px 0;
		}

		.success {
			color: #4CAF50;
		}

		.error {
			color: #f44336;
		}
	</style>
</head>

<body>
	<div class="container">
		<h1>üß™ Simulador de Pedido WhatsApp</h1>
		<p>Este simulador cria um pedido WhatsApp no localStorage para testar o painel admin.</p>

		<button onclick="createTestOrder()">üì± Criar Pedido WhatsApp</button>
		<button onclick="viewOrders()">üëÄ Ver Pedidos</button>
		<button onclick="clearOrders()">üóëÔ∏è Limpar Pedidos</button>
		<button onclick="openAdmin()">üë®‚Äçüíº Abrir Admin</button>

		<div id="output"></div>
	</div>

	<script>
		function createTestOrder() {
			const testOrder = {
				id: `order_${Date.now()}`,
				order_number: `ALS-2024-TEST-${Math.floor(Math.random() * 1000)}`,
				customer_name: 'Jo√£o Silva Teste',
				customer_email: 'joao.teste@email.com',
				customer_phone: '11999999999',
				status: 'aguardando_pagamento',
				subtotal: 150.00,
				shipping_cost: 15.00,
				total_amount: 165.00,
				items: [
					{
						productName: 'Camiseta Nike Teste',
						size: 'M',
						color: 'Azul',
						quantity: 1,
						unitPrice: 150.00,
						totalPrice: 150.00
					}
				],
				shipping_address: {
					name: 'Jo√£o Silva Teste',
					email: 'joao.teste@email.com',
					phone: '11999999999',
					street: 'Rua Teste, 123',
					city: 'S√£o Paulo',
					state: 'SP',
					zip_code: '01234-567'
				},
				notes: 'Pedido de teste via WhatsApp - Simulador',
				whatsapp_message: 'Mensagem de teste para admin',
				whatsapp_sent_at: new Date().toISOString(),
				created_at: new Date().toISOString(),
				method: 'whatsapp'
			}

			// Salvar no localStorage
			const existingOrders = JSON.parse(localStorage.getItem('user_orders') || '[]')
			existingOrders.push(testOrder)
			localStorage.setItem('user_orders', JSON.stringify(existingOrders))

			document.getElementById('output').innerHTML = `
                <div class="order-info success">
                    <h3>‚úÖ Pedido WhatsApp Criado!</h3>
                    <p><strong>ID:</strong> ${testOrder.id}</p>
                    <p><strong>N√∫mero:</strong> ${testOrder.order_number}</p>
                    <p><strong>Cliente:</strong> ${testOrder.customer_name}</p>
                    <p><strong>Email:</strong> ${testOrder.customer_email}</p>
                    <p><strong>Total:</strong> R$ ${testOrder.total_amount.toFixed(2)}</p>
                    <p><strong>Status:</strong> ${testOrder.status}</p>
                    <p><strong>Total de pedidos no localStorage:</strong> ${existingOrders.length}</p>
                </div>
            `
		}

		function viewOrders() {
			const orders = JSON.parse(localStorage.getItem('user_orders') || '[]')

			if (orders.length === 0) {
				document.getElementById('output').innerHTML = `
                    <div class="order-info error">
                        <h3>‚ùå Nenhum pedido encontrado</h3>
                        <p>Clique em "Criar Pedido WhatsApp" para adicionar um pedido de teste.</p>
                    </div>
                `
				return
			}

			let html = `
                <div class="order-info">
                    <h3>üìã Pedidos no localStorage (${orders.length})</h3>
            `

			orders.forEach((order, index) => {
				html += `
                    <div style="margin: 10px 0; padding: 10px; background-color: #444; border-radius: 5px;">
                        <p><strong>#${index + 1}</strong> - ${order.order_number}</p>
                        <p><strong>Cliente:</strong> ${order.customer_name}</p>
                        <p><strong>Email:</strong> ${order.customer_email}</p>
                        <p><strong>Status:</strong> ${order.status}</p>
                        <p><strong>Total:</strong> R$ ${order.total_amount.toFixed(2)}</p>
                        <p><strong>M√©todo:</strong> ${order.method || 'whatsapp'}</p>
                    </div>
                `
			})

			html += `</div>`
			document.getElementById('output').innerHTML = html
		}

		function clearOrders() {
			localStorage.removeItem('user_orders')
			document.getElementById('output').innerHTML = `
                <div class="order-info success">
                    <h3>üóëÔ∏è Pedidos removidos do localStorage</h3>
                    <p>Todos os pedidos foram limpos.</p>
                </div>
            `
		}

		function openAdmin() {
			// Tentar abrir o painel admin em uma nova aba
			const adminUrl = window.location.origin + '/admin/pedidos'
			window.open(adminUrl, '_blank')

			document.getElementById('output').innerHTML = `
                <div class="order-info">
                    <h3>üë®‚Äçüíº Abrindo Painel Admin</h3>
                    <p>URL: <a href="${adminUrl}" target="_blank">${adminUrl}</a></p>
                    <p>Verifique se os pedidos WhatsApp aparecem com o badge verde "üì± WhatsApp"</p>
                </div>
            `
		}

		// Mostrar pedidos existentes ao carregar
		window.onload = function () {
			viewOrders()
		}
	</script>
</body>

</html>